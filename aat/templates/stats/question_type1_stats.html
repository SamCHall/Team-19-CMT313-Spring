{% extends "base.html" %}

{% block content %}
<h1>{{ question.title }} - Stats</h1>

<!-- Include html file with code to display question here -->

<h2>Overall performance</h2>

<ul>
    <li>Number of submissions: {{ question.submissions | length }}</li>
    <li>Number of blanks: {{ question.num_of_blanks() }}</li>
    <li>Average Mark: {{ question.average_mark() }}</li>
    <li>Lowest Mark: {{ question.lowest_mark() }}</li>
    <li>Highest Mark: {{ question.highest_mark() }}</li>
</ul>

<h2>Each blank word</h2>
{% for count in range(0, question.num_of_blanks()) %}
{% set correct_answer = question.list_correct_answers()[count] %}
{% set answers = question.answer_occur_for_blank(count) %}
{% set incorrect_answers = answers | reject('equalto', (correct_answer, question.num_correct_for_blank(count))) | list %}
<h3>Blank {{ count+1 }} - {{ correct_answer }}</h3>
<ul>
    <li>Number of correct submissions: {{ question.num_correct_for_blank(count) }}</li>
    <li>Precentage of correct submissions: {{ question.correct_precentage_for_black(count) }}</li>
    {% if incorrect_answers | length > 0 %}
    <li>Incorrect answers given:
        {% for answer in incorrect_answers %}
        {{ answer[0] }}{% if not loop.last %},{% endif %}
        {% endfor %}
    </li>
    {% endif %}
</ul>
<figure>
    <figcaption>Table of answers with occurrences</figcaption>
    <table>
        <tr>
            <td>Answer</td>
            <td>Occurrences</td>
        </tr>
        {% for answer in answers %}
        <tr>
            <td>{{ answer[0] }}</td>
            <td>{{ answer[1] }}</td>
        </tr>
        {% endfor %}
    </table>
</figure>
{% endfor %}
{% endblock content %}
