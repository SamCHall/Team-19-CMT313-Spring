{% extends "base.html" %}

{% block head %}
    {% assets "graph" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock head %}

{% block content %}
{% if assignment.number_of_submissions() > 0 %}
<section class="container">
    <div class="card">
        <div class="card-header">
            <h1 class="card-title">{{ assignment.title }} - Stats</h1>
        </div>

        <div class="card-body stats-outer">
            <div class="card-group">
                <div class="card stats-inner">
                    <div class="card-body">
                        <h2>Overall Stats</h2>

                        <ul>
                            <li>Number of submissions: {{ assignment.number_of_submissions() }}</li>
                            <li>Number of students who have submitted: {{ assignment.number_of_students_submitted()}}</li>
                            <li>Number of students who have not submitted: {{ assignment.number_of_students_not_submitted()}}</li>

                            <li>Highest Mark: {{ assignment.highest_mark() }}</li>
                            <li>Lowest Mark: {{ assignment.lowest_mark() }}</li>
                            <li>Average Mark: {{ assignment.average_mark() }}</li>
                        </ul>

                    </div>
                </div>

                <div class="card stats-inner">
                    <div class="card-body">
                        {% set mark_dist = assignment.mark_dist() %}

                        <div id="overallGraph" class="graph"></div>

                        <script type="text/javascript">
                        {
                            let data = [
                                {
                                    x : {{ mark_dist.keys() | list }},
                                    y : {{ mark_dist.values() | list }},
                                    type : 'bar'
                                }
                            ];
                            displayGraph('overallGraph', 'Mark distribution', data)
                        }
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% else %}

<section class="container">
    <div class="card">
        <div class="card-header">
            <h1 class="card-title">{{ assignment.title }} - Stats</h1>
        </div>
        <div class="card-body">
            <p>There are currently no submissions for this question.</p>
        </div>
    </div>
</section>
{% endif %}

{% endblock content %}
